openapi: "3.0.3"
info:
  title: Flight bookings API
  description: |
    This API is used to get flight booking information from Amadeus public API and also book flight tickets online.
  version: "1.0"
servers:
- url: "http://{hostname}:{port}/api"
  variables:
    hostname:
      description: Hostname part of the server url.
      enum:
      - localhost
      - 127.0.0.1
      default: localhost
    port:
      description: Port number of the server url.
      default: "3000"
paths:
  /flights/cities:
    get:
      summary: Get city's code
      description: Returns a list of cities matching a given keyword
      operationId: search_cities
      tags:
        - flights
        - search
        - cities
      parameters:
      - name: keyword
        in: query
        required: true
        style: form
        explode: true
        schema:
          minimum: 1
          type: string
        example: BG
      - name: username
        in: query
        required: true
        style: form
        explode: true
        schema:
          minimum: 3
          type: string
        example: Stef
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        type:
                          type: string
                        subType:
                          type: string
                        name:
                          type: string
                        detailedName:
                          type: string
                        id:
                          type: string
                        self:
                          type: object
                          properties:
                            href:
                              type: string
                            methods:
                              type: array
                              items:
                                type: string
                        timeZoneOffset:
                          type: string
                        iataCode:
                          type: string
                        geoCode:
                          type: object
                          properties:
                            latitude:
                              type: number
                            longitude:
                              type: number
                        address:
                          type: object
                          properties:
                            cityName:
                              type: string
                            cityCode:
                              type: string
                            countryName:
                              type: string
                            countryCode:
                              type: string
                            stateCode:
                              type: string
                            regionCode:
                              type: string
                        analytics:
                          type: object
                          properties:
                            travelers:
                              type: object
                              properties:
                                score:
                                  type: number
                example:
                  message: Success!
                  data:
                  - analytics:
                      travelers:
                        score: 1
                    iataCode: BGR
                    address:
                      regionCode: NAMER
                      cityName: BANGOR
                      cityCode: BGR
                      countryCode: US
                      stateCode: ME
                      countryName: UNITED STATES OF AMERICA
                    timeZoneOffset: -04:00
                    name: BANGOR
                    self:
                      methods:
                      - GET
                      href: https://test.api.amadeus.com/v1/reference-data/locations/CBGR
                    geoCode:
                      latitude: 44.8075
                      longitude: -68.82806
                    subType: CITY
                    detailedName: ANGOR/ME/US:BANGOR INTL
                    id: CBGR
                    type: location
  /flights/airports-keyword:
    get:
      summary: Get airports
      description: Returns a list of airports matching a given keyword
      operationId: search_airports
      tags:
        - flights
        - search
        - airports
      parameters:
        - name: keyword
          in: query
          required: true
          style: form
          explode: true
          schema:
            minimum: 1
            type: string
          example: BG
        - name: username
          in: query
          required: true
          style: form
          explode: true
          schema:
            minimum: 3
            type: string
          example: Stef
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        type:
                          type: string
                        subType:
                          type: string
                        name:
                          type: string
                        detailedName:
                          type: string
                        id:
                          type: string
                        self:
                          type: object
                          properties:
                            href:
                              type: string
                            methods:
                              type: array
                              items:
                                type: string
                        timeZoneOffset:
                          type: string
                        iataCode:
                          type: string
                        geoCode:
                          type: object
                          properties:
                            latitude:
                              type: number
                            longitude:
                              type: number
                        address:
                          type: object
                          properties:
                            cityName:
                              type: string
                            cityCode:
                              type: string
                            countryName:
                              type: string
                            countryCode:
                              type: string
                            stateCode:
                              type: string
                            regionCode:
                              type: string
                        analytics:
                          type: object
                          properties:
                            travelers:
                              type: object
                              properties:
                                score:
                                  type: number
                example:
                  message: Success!
                  data:
                  - analytics:
                      travelers:
                        score: 1
                    iataCode: BGR
                    address:
                      regionCode: NAMER
                      cityName: BANGOR
                      cityCode: BGR
                      countryCode: US
                      stateCode: ME
                      countryName: UNITED STATES OF AMERICA
                    timeZoneOffset: -04:00
                    name: BANGOR
                    self:
                      methods:
                      - GET
                      href: https://test.api.amadeus.com/v1/reference-data/locations/CBGR
                    geoCode:
                      latitude: 44.8075
                      longitude: -68.82806
                    subType: AIRPORT
                    detailedName: BANGOR/ME/US:BANGOR INTL
                    id: ABGR
                    type: location
  /flights/airports-location:
    get:
      summary: Get airports near location
      description: Returns a list of relevant airports near to a given point
      operationId: search_airports_nearby
      tags:
        - flights
        - search
        - airports
      parameters:
        - name: longitude
          in: query
          required: true
          schema:
            type: string
          example: -68.00
        - name: latitude
          in: query
          required: true
          schema:
            type: string
          example: 44.00
        - name: username
          in: query
          required: true
          schema:
            type: string
          example: Stef
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        type:
                          type: string
                        subType:
                          type: string
                        name:
                          type: string
                        detailedName:
                          type: string
                        timeZoneOffset:
                          type: string
                        iataCode:
                          type: string
                        geoCode:
                          type: object
                          properties:
                            latitude:
                              type: number
                            longitude:
                              type: number
                        address:
                          type: object
                          properties:
                            cityName:
                              type: string
                            cityCode:
                              type: string
                            countryName:
                              type: string
                            countryCode:
                              type: string
                            stateCode:
                              type: string
                            regionCode:
                              type: string
                        distance:
                          type: object
                          properties:
                            value:
                              type: number
                            unit:
                              type: string
                        analytics:
                          type: object
                          properties:
                            travelers:
                              type: object
                              properties:
                                score:
                                  type: number
                            flights:
                              type: object
                              properties:
                                score:
                                  type: number
                        relevance:
                          type: number
                example:
                  message: Success!
                  data:
                  - analytics:
                      travelers:
                        score: 1
                      flights:
                        score: 2
                    iataCode: BOS
                    address:
                      regionCode: NAMER
                      cityName: BOSTON
                      cityCode: BOS
                      countryCode: US
                      stateCode: MA
                      countryName: UNITED STATES OF AMERICA
                    timeZoneOffset: -04:00
                    name: EDWARD L LOGAN INTL
                    geoCode:
                      latitude: 42.36514
                      longitude: -71.01777
                    subType: AIRPORT
                    detailedName: BOSTON/MA/US:EDWARD L LOGAN IN
                    type: location
                    distance:
                      value: 305
                      unit: "KM"
                    relevance: 9.42849
  /flights/destinations:
    get:
      summary: Get destinations
      description: Find the cheapest destinations where you can fly to
      operationId: get_destinations
      tags: 
        - flights
        - search
        - destinations
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
          example: Stef
        - name: origin
          in: query
          required: true
          schema:
            type: string
          example: BOS
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        type:
                          type: string
                        subtype:
                          type: string
                        origin:
                          type: string
                        destionation:
                          type: string
                        departureDate:
                          type: string
                        returnDate:
                          type: string
                        price:
                          type: object
                          properties:
                            total:
                              type: string
                        links:
                          type: object
                          properties:
                            flightDates:
                              type: string
                            flightOffers:
                              type: string
                example:
                  message: Success!
                  data:
                    - type: flight-destination
                      origin: BOS
                      destination: LAX
                      departureDate: 2022-08-30
                      returnDate: 2022-09-09
                      price:
                        total: 247.21
                      links:
                        flightDates: "https://test.api.amadeus.com/v1/shopping/flight-dates?origin=BOS&destination=LAX&departureDate=2022-05-05,2022-10-31&oneWay=false&duration=1,15&nonStop=false&viewBy=DURATION"
                        flightOffers: "https://test.api.amadeus.com/v2/shopping/flight-offers?originLocationCode=BOS&destinationLocationCode=LAX&departureDate=2022-08-30&returnDate=2022-09-09&adults=1&nonStop=false"
  /flights/dates:
    get:
      summary: Get flight dates
      description: Find the cheapest flight dates from an origin to a destination
      operationId: dates
      deprecated: true
      tags:
        - flights
        - search
        - dates
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
          example: Stef
        - name: origin
          in: query
          required: true
          schema:
            type: string
          example: BOS
        - name: destination
          in: query
          required: true
          schema:
            type: string
          example: LAX
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
  /flights/offers:
    get:
      summary: Get flight offers
      description: Return cheapest flight recommendations and prices on a given journey
      operationId: offers_search
      tags:
        - flights
        - search
        - offers
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
          example: Stef
        - name: originLocationCode
          in: query
          required: true
          schema:
            type: string
          example: BOS
        - name: destinationLocationCode
          in: query
          required: true
          schema:
            type: string
          example: LAX
        - name: departureDate
          in: query
          required: true
          schema:
            type: string
          example: "2022-08-30"
        - name: adults
          in: query
          required: true
          schema:
            type: number
          example: 1
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
              example:
                message: Success!
                data:
                - type: flight-offer
                  id: '1'
                  source: GDS
                  instantTicketingRequired: false
                  nonHomogeneous: false
                  oneWay: false
                  lastTicketingDate: '2022-05-05'
                  numberOfBookableSeats: 3
                  itineraries:
                    - duration: PT6H23M
                      segments:
                        - departure:
                            iataCode: BOS
                            terminal: A
                            at: '2022-08-30T15:25:00'
                          arrival:
                            iataCode: LAX
                            terminal: '2'
                            at: '2022-08-30T18:48:00'
                          carrierCode: DL
                          number: '519'
                          aircraft:
                            code: 75W
                          operating:
                            carrierCode: DL
                          duration: PT6H23M
                          id: '162'
                          numberOfStops: 0
                          blacklistedInEU: false
                  price:
                    currency: EUR
                    total: '118.17'
                    base: '97.00'
                    fees:
                      - amount: '0.00'
                        type: SUPPLIER
                      - amount: '0.00'
                        type: TICKETING
                    grandTotal: '118.17'
                  pricingOptions:
                    fareType:
                      - PUBLISHED
                    includedCheckedBagsOnly: false
                  validatingAirlineCodes:
                    - DL
                  travelerPricings:
                    - travelerId: '1'
                      fareOption: STANDARD
                      travelerType: ADULT
                      price:
                        currency: EUR
                        total: '118.17'
                        base: '97.00'
                      fareDetailsBySegment:
                        - segmentId: '162'
                          cabin: ECONOMY
                          fareBasis: VAVNA0BQ
                          brandedFare: BASICECON
                          class: E
                          includedCheckedBags:
                            quantity: 0
  /flights/airlines:
    get:
      summary: Get airlines
      description: Returns the airline information
      operationId: airlines
      tags:
        - flights
        - search
        - airlines
      parameters:
        - name: username
          in: query
          required: true
          schema:
            type: string
          example: Stef
        - name: airlineCodes
          in: query
          required: true
          schema:
            type: string
          example: BOS
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
              example:
                data:
                  - type: airline
                    iataCode: LV
                    icaoCode: BOS
                    businessName: OPENSKIES
                    commonName: OPENSKIES
                message: Success!
  /flights/tickets/{ticketId}:
    get:
      summary: Get ticket
      description: Get a booked ticket by its id
      operationId: get_ticket
      tags:
        - flights
        - booking
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
          example: 627bff5903b13bbe3f8205fa
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      username:
                        type: string
                      ticketOffer:
                        type: object
                      departureDate:
                        type: object
                      arrivalDate:
                        type: object
                      _id:
                        type: object
              example:
                message: Success!
                data:
                  _id:
                    $oid: 627bff5903b13bbe3f8205fa
                  username: Stef
                  ticketOffer:
                    type: flight-offer
                    id: '3'
                    source: GDS
                    instantTicketingRequired: false
                    nonHomogeneous: false
                    oneWay: false
                    lastTicketingDate: '2022-05-12'
                    numberOfBookableSeats: 3
                    itineraries:
                      - duration: PT6H30M
                        segments:
                          - departure:
                              iataCode: BOS
                              terminal: A
                              at: '2022-08-30T07:15:00'
                            arrival:
                              iataCode: LAX
                              terminal: '2'
                              at: '2022-08-30T10:45:00'
                            carrierCode: DL
                            number: '312'
                            aircraft:
                              code: 75W
                            operating:
                              carrierCode: DL
                            duration: PT6H30M
                            id: '191'
                            numberOfStops: 0
                            blacklistedInEU: false
                    price:
                      currency: EUR
                      total: '117.02'
                      base: '96.00'
                      fees:
                        - amount: '0.00'
                          type: SUPPLIER
                        - amount: '0.00'
                          type: TICKETING
                      grandTotal: '117.02'
                    pricingOptions:
                      fareType:
                        - PUBLISHED
                      includedCheckedBagsOnly: false
                    validatingAirlineCodes:
                      - DL
                    travelerPricings:
                      - travelerId: '1'
                        fareOption: STANDARD
                        travelerType: ADULT
                        price:
                          currency: EUR
                          total: '117.02'
                          base: '96.00'
                        fareDetailsBySegment:
                          - segmentId: '191'
                            cabin: ECONOMY
                            fareBasis: VAVNA0BQ
                            brandedFare: BASICECON
                            class: E
                            includedCheckedBags:
                              quantity: 0
                  departureDate:
                    $date: '2022-08-30T07:15:00Z'
                  arrivalDate:
                    $date: '2022-08-30T10:45:00Z'
    delete:
      summary: Delete a booking
      description: Cancel a booked ticket
      tags:
        - flights
        - booking
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: string
          example: 627bff5903b13bbe3f8205fa
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                      message:
                        type: string
                      data:
                        type: object
                        properties:
                          _id:
                            type: object
                          username:
                            type: string
                          ticketOffer:
                            type: object
                          departureDate:
                            type: object
                          arrivalDate:
                            type: object
                example:
                  message: Success!
                  data:
                    _id:
                      $oid: 627bff5903b13bbe3f8205fa
                    username: Stef
                    ticketOffer:
                      type: flight-offer
                      id: '3'
                      source: GDS
                      instantTicketingRequired: false
                      nonHomogeneous: false
                      oneWay: false
                      lastTicketingDate: '2022-05-12'
                      numberOfBookableSeats: 3
                      itineraries:
                        - duration: PT6H30M
                          segments:
                            - departure:
                                iataCode: BOS
                                terminal: A
                                at: '2022-08-30T07:15:00'
                              arrival:
                                iataCode: LAX
                                terminal: '2'
                                at: '2022-08-30T10:45:00'
                              carrierCode: DL
                              number: '312'
                              aircraft:
                                code: 75W
                              operating:
                                carrierCode: DL
                              duration: PT6H30M
                              id: '191'
                              numberOfStops: 0
                              blacklistedInEU: false
                      price:
                        currency: EUR
                        total: '117.02'
                        base: '96.00'
                        fees:
                          - amount: '0.00'
                            type: SUPPLIER
                          - amount: '0.00'
                            type: TICKETING
                        grandTotal: '117.02'
                      pricingOptions:
                        fareType:
                          - PUBLISHED
                        includedCheckedBagsOnly: false
                      validatingAirlineCodes:
                        - DL
                      travelerPricings:
                        - travelerId: '1'
                          fareOption: STANDARD
                          travelerType: ADULT
                          price:
                            currency: EUR
                            total: '117.02'
                            base: '96.00'
                          fareDetailsBySegment:
                            - segmentId: '191'
                              cabin: ECONOMY
                              fareBasis: VAVNA0BQ
                              brandedFare: BASICECON
                              class: E
                              includedCheckedBags:
                                quantity: 0
                    departureDate:
                      $date: '2022-08-30T07:15:00Z'
                    arrivalDate:
                      $date: '2022-08-30T10:45:00Z'
  /flights/myTickets/{username}:
    get:
      summary: Get tickets for a user
      description: Return all tickets for a specific user
      operationId: get_tickets
      tags:
        - flights
        - booking
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          example: Stef
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        username:
                          type: string
                        ticketOffer:
                          type: object
                        _id:
                          type: string
              example:
                message: Success!
                data:
                  - _id:
                      $oid: 627bff5903b13bbe3f8205fa
                    username: Stef
                    ticketOffer:
                      type: flight-offer
                      id: '3'
                      source: GDS
                      instantTicketingRequired: false
                      nonHomogeneous: false
                      oneWay: false
                      lastTicketingDate: '2022-05-12'
                      numberOfBookableSeats: 3
                      itineraries:
                        - duration: PT6H30M
                          segments:
                            - departure:
                                iataCode: BOS
                                terminal: A
                                at: '2022-08-30T07:15:00'
                              arrival:
                                iataCode: LAX
                                terminal: '2'
                                at: '2022-08-30T10:45:00'
                              carrierCode: DL
                              number: '312'
                              aircraft:
                                code: 75W
                              operating:
                                carrierCode: DL
                              duration: PT6H30M
                              id: '191'
                              numberOfStops: 0
                              blacklistedInEU: false
                      price:
                        currency: EUR
                        total: '117.02'
                        base: '96.00'
                        fees:
                          - amount: '0.00'
                            type: SUPPLIER
                          - amount: '0.00'
                            type: TICKETING
                        grandTotal: '117.02'
                      pricingOptions:
                        fareType:
                          - PUBLISHED
                        includedCheckedBagsOnly: false
                      validatingAirlineCodes:
                        - DL
                      travelerPricings:
                        - travelerId: '1'
                          fareOption: STANDARD
                          travelerType: ADULT
                          price:
                            currency: EUR
                            total: '117.02'
                            base: '96.00'
                          fareDetailsBySegment:
                            - segmentId: '191'
                              cabin: ECONOMY
                              fareBasis: VAVNA0BQ
                              brandedFare: BASICECON
                              class: E
                              includedCheckedBags:
                                quantity: 0
                    departureDate:
                      $date: '2022-08-30T07:15:00Z'
                    arrivalDate:
                      $date: '2022-08-30T10:45:00Z'
                  - _id:
                      $oid: 627bff6e03b13bbe3f8205fb
                    username: Stef
                    ticketOffer:
                      type: flight-offer
                      id: '3'
                      source: GDS
                      instantTicketingRequired: false
                      nonHomogeneous: false
                      oneWay: false
                      lastTicketingDate: '2022-05-12'
                      numberOfBookableSeats: 3
                      itineraries:
                        - duration: PT6H30M
                          segments:
                            - departure:
                                iataCode: BOS
                                terminal: A
                                at: '2022-08-30T07:15:00'
                              arrival:
                                iataCode: LAX
                                terminal: '2'
                                at: '2022-08-30T10:45:00'
                              carrierCode: DL
                              number: '312'
                              aircraft:
                                code: 75W
                              operating:
                                carrierCode: DL
                              duration: PT6H30M
                              id: '191'
                              numberOfStops: 0
                              blacklistedInEU: false
                      price:
                        currency: EUR
                        total: '117.02'
                        base: '96.00'
                        fees:
                          - amount: '0.00'
                            type: SUPPLIER
                          - amount: '0.00'
                            type: TICKETING
                        grandTotal: '117.02'
                      pricingOptions:
                        fareType:
                          - PUBLISHED
                        includedCheckedBagsOnly: false
                      validatingAirlineCodes:
                        - DL
                      travelerPricings:
                        - travelerId: '1'
                          fareOption: STANDARD
                          travelerType: ADULT
                          price:
                            currency: EUR
                            total: '117.02'
                            base: '96.00'
                          fareDetailsBySegment:
                            - segmentId: '191'
                              cabin: ECONOMY
                              fareBasis: VAVNA0BQ
                              brandedFare: BASICECON
                              class: E
                              includedCheckedBags:
                                quantity: 0
                    departureDate:
                      $date: '2022-08-30T07:15:00Z'
                    arrivalDate:
                      $date: '2022-08-30T10:45:00Z'
                
  /flights/tickets:
    post:
      summary: Book a ticket
      description: Book a flight ticket provided by Amadeus API
      operationId: book_a_ticket
      tags:
        - flights
        - booking
      requestBody:
        description: Parameters are username and ticket offer
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                ticketOffer:
                  type: object
              example:
                username: Stefan
                ticketOffer:
                  type: flight-offer
                  id: '3'
                  source: GDS
                  instantTicketingRequired: false
                  nonHomogeneous: false
                  oneWay: false
                  lastTicketingDate: '2022-05-12'
                  numberOfBookableSeats: 3
                  itineraries:
                    - duration: PT6H30M
                      segments:
                        - departure:
                            iataCode: BOS
                            terminal: A
                            at: '2022-08-30T07:15:00'
                          arrival:
                            iataCode: LAX
                            terminal: '2'
                            at: '2022-08-30T10:45:00'
                          carrierCode: DL
                          number: '312'
                          aircraft:
                            code: 75W
                          operating:
                            carrierCode: DL
                          duration: PT6H30M
                          id: '191'
                          numberOfStops: 0
                          blacklistedInEU: false
                  price:
                    currency: EUR
                    total: '117.02'
                    base: '96.00'
                    fees:
                      - amount: '0.00'
                        type: SUPPLIER
                      - amount: '0.00'
                        type: TICKETING
                    grandTotal: '117.02'
                  pricingOptions:
                    fareType:
                      - PUBLISHED
                    includedCheckedBagsOnly: false
                  validatingAirlineCodes:
                    - DL
                  travelerPricings:
                    - travelerId: '1'
                      fareOption: STANDARD
                      travelerType: ADULT
                      price:
                        currency: EUR
                        total: '117.02'
                        base: '96.00'
                      fareDetailsBySegment:
                        - segmentId: '191'
                          cabin: ECONOMY
                          fareBasis: VAVNA0BQ
                          brandedFare: BASICECON
                          class: E
                          includedCheckedBags:
                            quantity: 0
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: object
                    properties:
                      "$oid":
                        type: string
                example:
                  message: Success!
                  data:
                    username: Stef
                    ticketOffer:
                      ticketOfferId: Offer123
                    _id: 
                      "$oid": 627306b7178af0708237e4a8
    patch:
        summary: Change ticket
        description: Change given username, departure or arrival date for a specific booking
        operationId: change_ticket_info
        tags:
          - flights
          - booking
        requestBody:
          description: Parameters are id of a ticket, username and departure date
          required: true
          content:
            application/json:
              schema:
                type: object
                properties:
                  ticketId:
                    type: string
                  username:
                    type: string
                  departureDate:
                    type: string
                  arrivalDate:
                    type: string
                  info:
                    type: string
                example:
                  ticketId: 627bff2d03b13bbe3f8205f9
                  username: Mina
                  departureDate: '2022-10-10'
                  arrivalDate: '2022-10-13'
                  info: "Delay due to dense air traffic."
        responses:
          "200":
            description: OK
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    message:
                      type: string
                    data:
                      type: object
                  example:
                    message: Success!
                    data:
                      notification-type: Flight info modified
                      info: Delay due to dense air traffic.
                      ticket:
                        _id:
                          $oid: 627b89e46c66808f8b06113d
                        username: Mina
                        ticketOffer:
                          type: flight-offer
                          id: '1'
                          source: GDS
                          instantTicketingRequired: false
                          nonHomogeneous: false
                          oneWay: false
                          lastTicketingDate: '2022-05-12'
                          numberOfBookableSeats: 3
                          itineraries:
                            - duration: PT6H23M
                              segments:
                                - departure:
                                    iataCode: BOS
                                    terminal: A
                                    at: '2022-08-30T15:25:00'
                                  arrival:
                                    iataCode: LAX
                                    terminal: '2'
                                    at: '2022-08-30T18:48:00'
                                  carrierCode: DL
                                  number: '519'
                                  aircraft:
                                    code: 75W
                                  operating:
                                    carrierCode: DL
                                  duration: PT6H23M
                                  id: '146'
                                  numberOfStops: 0
                                  blacklistedInEU: false
                          price:
                            currency: EUR
                            total: '117.02'
                            base: '96.00'
                            fees:
                              - amount: '0.00'
                                type: SUPPLIER
                              - amount: '0.00'
                                type: TICKETING
                            grandTotal: '117.02'
                          pricingOptions:
                            fareType:
                              - PUBLISHED
                            includedCheckedBagsOnly: false
                          validatingAirlineCodes:
                            - DL
                          travelerPricings:
                            - travelerId: '1'
                              fareOption: STANDARD
                              travelerType: ADULT
                              price:
                                currency: EUR
                                total: '117.02'
                                base: '96.00'
                              fareDetailsBySegment:
                                - segmentId: '146'
                                  cabin: ECONOMY
                                  fareBasis: VAVNA0BQ
                                  brandedFare: BASICECON
                                  class: E
                                  includedCheckedBags:
                                    quantity: 0
                        departureDate:
                          $date: '2022-10-10T00:00:00Z'
                        arrivalDate:
                          $date: '2022-10-13T00:00:00Z'
                      changes:
                        username: Mina
                        departureDate:
                          $date: '2022-10-10T00:00:00Z'
                        arrivalDate:
                          $date: '2022-10-13T00:00:00Z'
                      _id:
                        $oid: 627bf00fa7b7cd54dbfa1358
  /flights/notifications/{username}:
    get:
      summary: Get notifications
      description: Returns notifications for a specified username.
      operationId: get_notifications
      tags:
        - flights
        - notifications
      parameters:
        - name: username
          required: true
          in: path
          schema:
            type: string
          example: Stefan
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
                example:
                  message: Success!
                  data:
                    - _id:
                        $oid: 627bf16ea7b7cd54dbfa1359
                      notification-type: Flight delayed
                      info: Bad weather conditions
                      newDepartureDate:
                        $date: '2022-08-31T15:25:00Z'
                      newarrivalDate:
                        $date: '2022-08-31T18:48:00Z'
                      ticket:
                        username: Stef
                        ticketOffer:
                          type: flight-offer
                          id: '1'
                          source: GDS
                          instantTicketingRequired: false
                          nonHomogeneous: false
                          oneWay: false
                          lastTicketingDate: '2022-05-12'
                          numberOfBookableSeats: 3
                          itineraries:
                            - duration: PT6H23M
                              segments:
                                - departure:
                                    iataCode: BOS
                                    terminal: A
                                    at: '2022-08-30T15:25:00'
                                  arrival:
                                    iataCode: LAX
                                    terminal: '2'
                                    at: '2022-08-30T18:48:00'
                                  carrierCode: DL
                                  number: '519'
                                  aircraft:
                                    code: 75W
                                  operating:
                                    carrierCode: DL
                                  duration: PT6H23M
                                  id: '146'
                                  numberOfStops: 0
                                  blacklistedInEU: false
                          price:
                            currency: EUR
                            total: '117.02'
                            base: '96.00'
                            fees:
                              - amount: '0.00'
                                type: SUPPLIER
                              - amount: '0.00'
                                type: TICKETING
                            grandTotal: '117.02'
                          pricingOptions:
                            fareType:
                              - PUBLISHED
                            includedCheckedBagsOnly: false
                          validatingAirlineCodes:
                            - DL
                          travelerPricings:
                            - travelerId: '1'
                              fareOption: STANDARD
                              travelerType: ADULT
                              price:
                                currency: EUR
                                total: '117.02'
                                base: '96.00'
                              fareDetailsBySegment:
                                - segmentId: '146'
                                  cabin: ECONOMY
                                  fareBasis: VAVNA0BQ
                                  brandedFare: BASICECON
                                  class: E
                                  includedCheckedBags:
                                    quantity: 0
                        departureDate:
                          $date: '2022-08-30T15:25:00Z'
                        arrivalDate:
                          $date: '2022-08-30T18:48:00Z'
                      username: Stefan
  /weather/forecast/{startDate}/{endDate}:
    get:
      summary: Get weather forecast
      description: Return weather forecast information for a specific period
      operationId: weather_forecast
      tags:
        - weather
        - forecast
      parameters:
        - name: startDate
          in: path
          required: true
          schema:
            type: string
          example: "2021-01-01"
        - name: endDate
          in: path
          required: true
          schema:
            type: string
          example: "2021-01-02"
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        precipitation:
                          type: number
                        temp_max:
                          type: number
                        temp_min:
                          type: number
                        weather:
                          type: string
                        wind:
                          type: number
                        _id:
                          type: object
                          properties:
                            "$oid":
                              type: string
                        date:
                          type: object
                          properties:
                            "$date":
                              type: string
                example:
                  message: Success!
                  data:
                    - _id:
                        $oid: 627b69e63a63f2fc5de53fc6
                      date:
                        $date: '2021-01-01T00:00:00Z'
                      precipitation: 21
                      temp_max: 12.8
                      temp_min: 5
                      weather: drizzle
                      wind: 4.7
                    - _id:
                        $oid: 627b69e93a63f2fc5de54648
                      date:
                        $date: '2021-01-02T00:00:00Z'
                      precipitation: 10.9
                      temp_max: 10.6
                      temp_min: 2.8
                      weather: rain
                      wind: 4.5
  /weather/start:
    put:
      summary: Start weather service
      description: Start receviving weather info
      operationId: weather_start
      tags:
        - weather
      responses:
        "200":
          description: "OK"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  data:
                    type: object
                example:
                  message: "Success!"
                  data: {}